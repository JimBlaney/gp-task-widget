<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>gp-task-widget</title>

    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
    <link rel="stylesheet" href="//js.arcgis.com/3.9/js/esri/css/esri.css" />

    <style>

      html, body {
        margin: 0; padding: 0;
        width: 100%; height: 100%;
      }

      #map {
        background-color: #d0cfd4;
      }

    </style>

  </head>
  <body>

    <div class="container">

      <div class="jumbotron">
        <h2>gp-task-widget</h2>
        <p class="lead">
          A set of dojo widgets for dynamically building user interfaces to consume Esri GPTasks
        </p>
      </div>

      <div class="col-sm-4">
<!--         <div data-dojo-type="gptest/dijit/GPServerPicker" data-dojo-props="id:'serverPicker'"></div> -->
        <div data-dojo-type="gp/dijit/GPtask" data-dojo-props="id: 'viewshedTaskWidget', url: 'http://sampleserver1.arcgisonline.com/ArcGIS/rest/services/Elevation/ESRI_Elevation_World/GPServer/Viewshed'"></div>
      </div>

      <div class="col-sm-8">
        <div id="map"></div>
      </div>

    </div>

    <script>
      var dojoConfig = {
        async: true,
        parseOnLoad: false,
        packages: [
          {
            name: "gp",
            location: location.pathname.replace(/[^\/]+$/, '') + "js/gp"
          },
          {
            name: "gptest",
            location: location.pathname.replace(/[^\/]+$/, '') + "js/gptest"
          }
        ]
      };
    </script>

    <script src="//js.arcgis.com/3.9/"></script>

    <script>
      require([
        "dojo/parser",
        "esri/map",
        "dijit/registry",
        "dojo/domReady!"
      ], function(
        parser,
        Map,
        registry
      ) {

        parser.parse().then(function() {

          var map = window.MAP = new Map("map", {
            basemap: "gray"
          });

          registry.byId("viewshedTaskWidget").set("map", map);

        });

      });
    </script>

  </body>
</html>
